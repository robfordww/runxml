package runxml

import (
	"testing"
)

func TestConvert(t *testing.T) {
	u16 := []byte{
		0x45, 0x0, 0x6e, 0x0, 0x20, 0x0, 0x62, 0x0,
		0x6c, 0x0, 0xe5, 0x0, 0x20, 0x0, 0x66, 0x0,
		0x6c, 0x0, 0x61, 0x0, 0x73, 0x0, 0x6b, 0x0,
		0x65, 0x0, 0x20, 0x0, 0xf8, 0x0, 0x6c, 0x0,
		0x21, 0x0, 0x20, 0x0, 0x3a, 0x0, 0x29, 0x0,
	}
	u8, err := DecodeUTF16(u16)
	if string(u8) != "En blå flaske øl! :)" || err != nil {
		t.Fail()
	}
	t.Log(string(u8))
	//t.Logf("%x", utf16.Encode([]rune{'E', 'n'}))
}

func TestUnEvenLength(t *testing.T) {
	u16 := []byte{
		0x45, 0x0, 0x6e, 0x0, 0x20, 0x0, 0x62, 0x0,
		0x6c, 0x0, 0xe5, 0x0, 0x20, 0x0, 0x66, 0x0,
		0x6c, 0x0, 0x61, 0x0, 0x73, 0x0, 0x6b, 0x0,
		0x65, 0x0, 0x20, 0x0, 0xf8, 0x0, 0x6c, 0x0,
		0x21, 0x0, 0x20, 0x0, 0x3a, 0x0, 0x29, 0x0,
		0x29,
	}
	_, err := DecodeUTF16(u16)
	if err == nil {
		t.Error("Expected uneven length to fail")
	}
}
